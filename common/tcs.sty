% Custom latex commands for TCS notes
\ProvidesPackage{tcs}

\usepackage{amsmath}

% Common stuff
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator{\sgn}{sgn}
\let\eps\varepsilon

\DeclarePairedDelimiter{\parenthesesdelimiter}{(}{)}
% prefer \pars{stuff} to \left(stuff\right) and similarly with \brackets, \braces and \set
\def\pars{\parenthesesdelimiter*}
\DeclarePairedDelimiter{\bracesdelimiter}{\{}{\}}
\def\braces{\bracesdelimiter*}
\DeclarePairedDelimiter{\bracketsdelimiter}{[}{]}
\def\brackets{\bracketsdelimiter*}
\DeclarePairedDelimiter{\absdelimiter}{|}{|}
\def\abs{\absdelimiter*}
\DeclarePairedDelimiter{\floordelimiter}{\lfloor}{\rfloor}
\def\floor{\floordelimiter*}
\DeclarePairedDelimiter{\ceildelimiter}{\lceil}{\rceil}
\def\ceil{\ceildelimiter*}
\DeclarePairedDelimiter{\dotproductdelimiter}{\langle}{\rangle}
\def\dotproduct{\dotproductdelimiter*}

\let\set\braces

\DeclareRobustCommand{\stirling}{\genfrac\{\}{0pt}{}}
\DeclareRobustCommand{\stirlingOne}{\genfrac[]{0pt}{}}

% Better spacing
\usepackage{setspace}
\onehalfspacing

% Better theorem styling
\usepackage{thmtools}

\theoremstyle{definition}
\declaretheorem[numberwithin=section,name=Twierdzenie]{theorem}
\declaretheorem[numberwithin=section,name=Lemat]{lemma}
\declaretheorem[numberwithin=section,name=Ćwiczenie]{exercise}
\declaretheorem[numberwithin=section,name=Definicja]{definition}
\declaretheorem[numberwithin=section,name=Przykład]{example}
\declaretheorem[numberwithin=section,name=Fakt]{fact}
\declaretheorem[numberwithin=section,name=Wniosek]{corollary}
\declaretheorem[numbered=no,name=Pytanie]{question}


% Common sets
\def\natural{\mathbb{N}}
\def\integer{\mathbb{Z}}
\def\real{\mathbb{R}}

% Set theory
\let\set\braces
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\powerset}{\mathcal{P}}
\renewcommand{\complement}[1]{\overline{#1}}
\let\function\rightarrow
\let\fIm\overrightarrow
\newcommand{\fInvIm}[1]{\fIm{#1}^{-1}}
\let\emptyset\varnothing


% Probability
\DeclareMathOperator{\prob}{P}
\newcommand{\expected}[1]{\mathbb{E}\brackets{#1}}
\DeclareMathOperator{\Var}{Var}
\newcommand{\variance}[1]{\Var\brackets{#1}}
\DeclareMathOperator{\Cov}{Cov}
\newcommand{\covariance}[2]{\Cov\pars{#1, #2}}
\newcommand\given[1][]{\:#1\vert\:}

% Probability distributions
\DeclareMathOperator{\Beta}{Beta}
\DeclareMathOperator{\Binom}{Binom}
\DeclareMathOperator{\Bern}{Bern}
\DeclareMathOperator{\Poi}{Poi}
\DeclareMathOperator{\Uni}{Uni}
\DeclareMathOperator{\Normal}{\mathcal{N}}

% Estimators
\DeclareMathOperator{\bias}{bias}
\newcommand{\mle}[1]{\widehat #1_{MLE}}
\newcommand{\map}[1]{\widehat #1_{MAP}}
\newcommand{\ls}[1]{\widehat #1_{LS}}

% Information theory
\DeclareMathOperator{\Channel}{Channel}
\DeclareMathOperator{\Enc}{Enc}
\DeclareMathOperator{\Dec}{Dec}
\DeclareMathOperator{\Ext}{Ext}
\DeclareMathOperator{\Com}{Com}

% Calculus
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand*\Diff[1]{\mathop{}\!\mathrm{d^#1}}

% Graphs
\newcommand{\Deg}{\text{deg}}

%
\newcommand{\indicator}[1]{\mathbf{1}\brackets{#1}}

\newcommand{\KL}[2]{\mathrm{KL}\pars{#1 \parallel #2}}

% Relations
\let\composition\circ
\newcommand{\lproj}[1]{#1_\mathrm{L}} % projection to left coordinate
\newcommand{\rproj}[1]{#1_\mathrm{P}} % projection to right coordinate

% Cardinality
\let\card\abs
\newcommand{\numerosity}{\mathrm{\scriptscriptstyle m}}
\newcommand{\eqnum}{\mathbin{\sim_\numerosity}}
\newcommand{\leqnum}{\mathbin{\leq_\numerosity}}
\newcommand{\ltnum}{\mathbin{<_\numerosity}}
\newcommand{\geqnum}{\mathbin{\geq_\numerosity}}
\newcommand{\gtnum}{\mathbin{<_\numerosity}}

% notiff -- from https://tex.stackexchange.com/questions/75361/is-there-no-good-way-to-write-not-iff, CC-BY-SA 3.0
\newcommand{\notiff}{%
	\mathrel{{\ooalign{\hidewidth$\not\phantom{"}$\hidewidth\cr$\iff$}}}}

% Statistics
\newcommand{\mean}[1]{\overline{#1}}

% Algebra
\def\vfield{\mathbb{V}}
\def\fieldset{K}
\def\field{\mathbb{\fieldset}}
\def\reverse{{}^{-1}}
\def\lin{{\mathrm{Lin}}}
\newcommand{\dotpro}[2]{\langle #1, #2 \rangle}
\newcommand{\norm}[1]{\left\Vert #1 \right\Vert}

% TikZ
\usepackage{pgfplots}
\usepackage {tikz}
\usepackage{tkz-euclide}
\usetikzlibrary {positioning,angles,calc,intersections}

% Complexity
\def\p{\textsc{P}}
\def\np{\textsc{NP}}
\def\conp{\textsc{coNP}}
\def\pspace{\textsc{PSPACE}}
\def\npspace{\textsc{NPSPACE}}
\def\exptime{\textsc{EXPTIME}}
\def\re{\textsc{RE}}
\def\r{\textsc{R}}
\newcommand{\reg}[1]{\textsc{REG}_#1}
\newcommand{\cfl}[1]{\textsc{CFL}_#1}
\newcommand{\csl}[1]{\textsc{CSL}_#1}

% Turing Machine
\def\blank{\sqcup}

% Posets
\providecommand\posetwidth[0]{\text{width}}
\providecommand\posetheight[0]{\text{height}}
\providecommand\psucc[0]{\text{succ}}
\providecommand\ppred[0]{\text{pred}}

% Misc
\let\eps\varepsilon
\let\len\abs

\newcommand{\continuum}{\mathfrak{c}}


% Styles for code snippets
\usepackage{listings}

\definecolor{bggrey}{rgb}{0.953, 0.949, 0.949}
\definecolor{commentColor}{rgb}{0.800, 0.800, 0.800}
\definecolor{keywordColor}{rgb}{0.396, 0.678, 0.718} % {101, 173, 183}
\definecolor{stringColor}{rgb}{0.329, 0.671, 0.855}
\definecolor{variableColor}{rgb}{0.757, 0.800, 0.259} % {193, 204, 66}
\definecolor{functionColor}{rgb}{0.549, 0.463, 0.753} % {140, 118, 192}

\lstdefinestyle{codeStyle}{
	commentstyle=\color{gray},
	keywordstyle=\color{functionColor},
	keywordstyle=[2]\color{variableColor},
	keywordstyle=[3]\color{keywordColor},
	stringstyle=\color{stringColor},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numberstyle=\sffamily\tiny\color{gray},
	numbersep=4pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=1
}
\lstset{
	style=codeStyle,
	basicstyle=\ttfamily\footnotesize,
	lineskip=-1.5pt
}

% Define style for a custom language
\lstdefinelanguage{Cpp}{
	keywords={},
	morekeywords=[3]{for, do, if, else, break},
	sensitive=true,
	comment=[l]{//},
	morecomment=[s]{/*}{*/},
	string=[b]"
}

% Warning text box
\usepackage{manfnt}
\usepackage{pifont, mdframed}

\newenvironment{warning}
{
	\par\begin{mdframed}[
			linewidth=0pt,
			backgroundcolor=bggrey,
			roundcorner=25pt,
			innertopmargin=10pt, innerbottommargin=10pt,
			innerrightmargin=15pt, innerleftmargin=10pt,
			skipbelow=10pt, skipabove=10pt
		]
		\begin{list}{}{\leftmargin=1cm
				\labelwidth=\leftmargin}\item[\dbend\;]}
			{
		\end{list}\end{mdframed}\par}
